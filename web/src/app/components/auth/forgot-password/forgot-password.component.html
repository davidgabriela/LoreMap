<div class="container">
  <mat-card>
    <mat-card-title>Password reset</mat-card-title>
    <h4 *ngIf="!submittedEmail" class="card-subtitle">
      Enter the <b>email address</b> that you used to register. We'll send you
      an email with a link to reset your password
    </h4>
    <h4
      *ngIf="submittedEmail && (foundEmail | async) === null"
      class="card-subtitle"
    >
      Looking for email...
    </h4>
    <h4
      *ngIf="submittedEmail && (foundEmail | async) === false"
      class="card-subtitle"
    >
      There is no account with this email. Please provide another email.
    </h4>
    <mat-card-content *ngIf="submittedEmail && (foundEmail | async) === true">
      <h4 class="card-subtitle">
        An email was sent to <b>{{ resetEmail }}</b> with a link to reset your
        password.
      </h4>
      <div class="form-footer">
        <button
          mat-raised-button
          color="primary"
          (click)="sendResetEmail(email.value)"
        >
          Log In
        </button>
      </div>
    </mat-card-content>
    <mat-card-content *ngIf="!(foundEmail | async)">
      <mat-form-field appearance="fill">
        <mat-label>Email</mat-label>
        <input
          matInput
          placeholder="name@example.com"
          [formControl]="email"
          required
          autocomplete="off"
        />
        <mat-error *ngIf="email.invalid">{{ getErrorMessage() }}</mat-error>
      </mat-form-field>
      <div class="form-footer">
        <button
          mat-raised-button
          color="primary"
          (click)="sendResetEmail(email.value)"
        >
          Send password recovery email
        </button>
      </div>
    </mat-card-content>
  </mat-card>
</div>
